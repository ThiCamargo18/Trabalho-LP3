******** NOTA: CADASTRE QUALQUER GERENTE COM QUALQUER CPF, PELO POSTGRES, SENAO NAO DA PRA RODAR O CÃ“DIGO*******


CREATE TABLE Cliente(
	cpf VARCHAR(20) PRIMARY KEY NOT NULL,
	nome VARCHAR(100) NOT NULL,
	telefone INT,
	rua VARCHAR(100),
	bairro VARCHAR(100),
	cidade VARCHAR(100),
	cep INT,
	email VARCHAR(100)
);

CREATE TABLE Gerente(
	id INT PRIMARY KEY,
	cpf VARCHAR(20) UNIQUE NOT NULL,
	nome VARCHAR(100) NOT NULL
);

CREATE TABLE Estoquista(
	id INT PRIMARY KEY,
	cpf VARCHAR(20) UNIQUE NOT NULL,
	nome VARCHAR(100) NOT NULL,
	numeroContrato INT NOT NULL,
	cpf_gerente VARCHAR(20),
	senha_acesso int,
	FOREIGN KEY(cpf_gerente) references Gerente(cpf)
);

CREATE TABLE Produto(
	id INT PRIMARY KEY,
	tipo VARCHAR(50),
	descricao VARCHAR(100),
	volume FLOAT,
	preco FLOAT NOT NULL,
	quantTotal INT,
	estocado varchar(3) not null
);

CREATE TABLE Compra(
	id SERIAl PRIMARY KEY,
	id_produto INT NOT NULL,
	cpf_cliente VARCHAR(20) NOT NULL,
	data_compra VARCHAR(20),
	hora_compra VARCHAR(20),
	valor_total Float,
	FOREIGN KEY(id_produto) REFERENCES Produto(id),
	FOREIGN KEY(cpf_cliente) REFERENCES Cliente(cpf)
);

CREATE TABLE Prateleira(
	id INT PRIMARY KEY,
	volume FLOAT
);


CREATE TABLE Prateleira_Estoquista(
	id_estoquista INT NOT NULL,
	id_prateleira INT NOT NULL,
	PRIMARY KEY(id_estoquista, id_prateleira),
	FOREIGN KEY(id_estoquista) references Estoquista(id),
	FOREIGN KEY(id_prateleira) references Prateleira(id)
);

CREATE TABLE Produto_Prateleira(
	id_prateleira INT NOT NULL,
	id_produto INT NOT NULL,
	quant_ProdPrateleira INT,
	PRIMARY KEY(id_prateleira, id_produto),
	FOREIGN KEY(id_prateleira) references Prateleira(id),
	FOREIGN KEY(id_produto) references Produto(id)
);

